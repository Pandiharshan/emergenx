import{r as d,A as C,u as E,j as e,L as F,a as S}from"./index-xrWeT0Kj.js";const k=()=>{const[a,b]=d.useState({name:"",email:"",password:"",confirmPassword:""}),[s,c]=d.useState({}),[l,g]=d.useState(!1),[h,m]=d.useState(""),{user:w,register:N}=d.useContext(C),f=E();d.useEffect(()=>{w&&f("/dashboard")},[w,f]);const p=r=>{const{name:t,value:u}=r.target;b(n=>({...n,[t]:u})),s[t]&&c(n=>({...n,[t]:""})),h&&m("")},v=()=>{const r={};return a.name.trim()?a.name.trim().length<2&&(r.name="Name must be at least 2 characters long"):r.name="Full name is required",a.email?/\S+@\S+\.\S+/.test(a.email)||(r.email="Please enter a valid email address"):r.email="Email is required",a.password?a.password.length<6?r.password="Password must be at least 6 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(a.password)||(r.password="Password must contain at least one uppercase letter, one lowercase letter, and one number"):r.password="Password is required",a.confirmPassword?a.password!==a.confirmPassword&&(r.confirmPassword="Passwords do not match"):r.confirmPassword="Please confirm your password",c(r),Object.keys(r).length===0},y=async r=>{var t,u,n,x,j;if(r.preventDefault(),m(""),!!v()){g(!0);try{const i={name:a.name.trim(),email:a.email.trim(),password:a.password},o=await N(i);o.success?f(`/triage/results/${o._id}`):m(o.message||"Registration failed. Please try again.")}catch(i){if(console.error("Registration error:",i),((t=i.response)==null?void 0:t.status)===400){const o=((u=i.response.data)==null?void 0:u.message)||"Invalid registration data";o.toLowerCase().includes("email")?c(P=>({...P,email:"This email is already registered"})):m(o)}else((n=i.response)==null?void 0:n.status)===409?c(o=>({...o,email:"An account with this email already exists"})):m(((j=(x=i.response)==null?void 0:x.data)==null?void 0:j.message)||i.message||"Network error. Please check your connection and try again.")}finally{g(!1)}}};return e.jsx("div",{className:"register-page",children:e.jsx("div",{className:"register-container",children:e.jsxs("div",{className:"register-card",children:[e.jsxs("div",{className:"register-header",children:[e.jsxs("div",{className:"register-logo",children:[e.jsx("div",{className:"logo-icon",children:e.jsx("span",{className:"medical-cross",children:"⚕"})}),e.jsx("h1",{className:"register-title",children:"Join TriageX"})]}),e.jsx("p",{className:"register-subtitle",children:"Create your healthcare dashboard account"})]}),e.jsxs("form",{onSubmit:y,className:"register-form",role:"form",noValidate:!0,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"name",className:"form-label",children:"Full Name"}),e.jsx("input",{type:"text",id:"name",name:"name",value:a.name,onChange:p,className:`form-input ${s.name?"form-input-error":""}`,placeholder:"Enter your full name","aria-describedby":s.name?"name-error":void 0,"aria-invalid":!!s.name,autoComplete:"name",disabled:l}),s.name&&e.jsx("span",{id:"name-error",className:"error-message",role:"alert",children:s.name})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:a.email,onChange:p,className:`form-input ${s.email?"form-input-error":""}`,placeholder:"Enter your email","aria-describedby":s.email?"email-error":void 0,"aria-invalid":!!s.email,autoComplete:"email",disabled:l}),s.email&&e.jsx("span",{id:"email-error",className:"error-message",role:"alert",children:s.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:a.password,onChange:p,className:`form-input ${s.password?"form-input-error":""}`,placeholder:"Create a secure password","aria-describedby":s.password?"password-error":"password-help","aria-invalid":!!s.password,autoComplete:"new-password",disabled:l}),s.password?e.jsx("span",{id:"password-error",className:"error-message",role:"alert",children:s.password}):e.jsx("span",{id:"password-help",className:"help-text",children:"Must be at least 6 characters with uppercase, lowercase, and number"})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"form-label",children:"Confirm Password"}),e.jsx("input",{type:"password",id:"confirmPassword",name:"confirmPassword",value:a.confirmPassword,onChange:p,className:`form-input ${s.confirmPassword?"form-input-error":""}`,placeholder:"Confirm your password","aria-describedby":s.confirmPassword?"confirm-password-error":void 0,"aria-invalid":!!s.confirmPassword,autoComplete:"new-password",disabled:l}),s.confirmPassword&&e.jsx("span",{id:"confirm-password-error",className:"error-message",role:"alert",children:s.confirmPassword})]}),h&&e.jsxs("div",{className:"register-error",role:"alert",children:[e.jsx("span",{className:"error-icon",children:"⚠"}),h]}),e.jsx("button",{type:"submit",className:"register-button",disabled:l,"aria-describedby":"register-button-status",children:l?e.jsxs(e.Fragment,{children:[e.jsx(F,{}),e.jsx("span",{children:"Creating account..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Register"}),e.jsx("span",{className:"button-arrow",children:"→"})]})}),e.jsx("div",{className:"register-footer",children:e.jsxs("p",{className:"login-link",children:["Already have an account?"," ",e.jsx(S,{to:"/login",className:"login-link-text",children:"Login here"})]})})]})]})})})};export{k as default};
