import{r as l,A as b,u as N,j as e,L as w,a as v}from"./index-xrWeT0Kj.js";const L=()=>{const[i,u]=l.useState({email:"",password:""}),[s,m]=l.useState({}),[n,g]=l.useState(!1),[c,t]=l.useState(""),{login:h}=l.useContext(b),x=N(),p=a=>{const{name:o,value:d}=a.target;u(r=>({...r,[o]:d})),s[o]&&m(r=>({...r,[o]:""})),c&&t("")},j=()=>{const a={};return i.email?/\S+@\S+\.\S+/.test(i.email)||(a.email="Please enter a valid email address"):a.email="Email is required",i.password?i.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",m(a),Object.keys(a).length===0},f=async a=>{var o,d;if(a.preventDefault(),console.log("Login form submitted:",i),t(""),!!j()){g(!0);try{const r=await h(i);r.success?x("/dashboard"):t(r.message||"Login failed. Please try again.")}catch(r){console.error("Login error:",r),t(((d=(o=r.response)==null?void 0:o.data)==null?void 0:d.message)||r.message||"Network error. Please check your connection and try again.")}finally{g(!1)}}};return e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsxs("div",{className:"login-logo",children:[e.jsx("div",{className:"logo-icon",children:e.jsx("span",{className:"medical-cross",children:"⚕"})}),e.jsx("h1",{className:"login-title",children:"TriageX"})]}),e.jsx("p",{className:"login-subtitle",children:"Welcome back to your healthcare dashboard"})]}),e.jsxs("form",{onSubmit:f,className:"login-form",role:"form",noValidate:!0,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:i.email,onChange:p,className:`form-input ${s.email?"form-input-error":""}`,placeholder:"Enter your email","aria-describedby":s.email?"email-error":void 0,"aria-invalid":!!s.email,autoComplete:"email",disabled:n}),s.email&&e.jsx("span",{id:"email-error",className:"error-message",role:"alert",children:s.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:i.password,onChange:p,className:`form-input ${s.password?"form-input-error":""}`,placeholder:"Enter your password","aria-describedby":s.password?"password-error":void 0,"aria-invalid":!!s.password,autoComplete:"current-password",disabled:n}),s.password&&e.jsx("span",{id:"password-error",className:"error-message",role:"alert",children:s.password})]}),c&&e.jsxs("div",{className:"login-error",role:"alert",children:[e.jsx("span",{className:"error-icon",children:"⚠"}),c]}),e.jsx("button",{type:"submit",className:"login-button",disabled:n,"aria-describedby":"login-button-status",children:n?e.jsxs(e.Fragment,{children:[e.jsx(w,{}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Login"}),e.jsx("span",{className:"button-arrow",children:"→"})]})}),e.jsx("div",{className:"login-footer",children:e.jsxs("p",{className:"register-link",children:["Don't have an account?"," ",e.jsx(v,{to:"/register",className:"register-link-text",children:"Register here"})]})})]})]})})})};export{L as default};
