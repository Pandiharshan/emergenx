import{u as N,j as e}from"./index-Ho7Cjgmc.js";import{r as i}from"./vendor-Gm9i_4Ku.js";import{g as y}from"./triageService-CxCohCPW.js";import{u as v}from"./router-DR174eU1.js";import"./ui-F4NiDqF7.js";const R=()=>{var m;const{user:c}=N(),n=v(),[a,x]=i.useState(null),[j,o]=i.useState(!0),[t,l]=i.useState(null);i.useEffect(()=>{(async()=>{try{o(!0),l(null);const r=await y();r&&r.length>0&&x(r[0])}catch(r){console.error("Error fetching recent triage:",r),l("Failed to load recent triage data")}finally{o(!1)}})()},[]);const d=()=>{n("/triage")},h=()=>{n("/history")},u=s=>new Date(s).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}),g=s=>{switch(s==null?void 0:s.toLowerCase()){case"high":return"#dc3545";case"medium":return"#fd7e14";case"low":return"#198754";default:return"#6c757d"}},p=s=>{switch(s==null?void 0:s.toLowerCase()){case"high":return"🔴";case"medium":return"🟡";case"low":return"🟢";default:return"⚪"}};return j?e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-loader",children:[e.jsx("div",{className:"loader-spinner"}),e.jsx("p",{children:"Loading your dashboard..."})]})}):e.jsx("div",{className:"dashboard-container",children:e.jsxs("div",{className:"dashboard-content",children:[e.jsxs("div",{className:"welcome-section",children:[e.jsxs("h1",{className:"welcome-title",children:["Welcome back, ",(c==null?void 0:c.name)||"User","!"]}),e.jsx("p",{className:"welcome-subtitle",children:"Your health assessment dashboard is ready to help you make informed decisions about your care."})]}),e.jsxs("div",{className:"quick-actions",children:[e.jsxs("div",{className:"action-card primary-action",children:[e.jsx("div",{className:"action-icon",children:"🏥"}),e.jsx("h3",{children:"Start New Assessment"}),e.jsx("p",{children:"Begin a new health emergency assessment to get personalized care recommendations."}),e.jsx("button",{className:"action-button primary",onClick:d,children:"Start New Assessment"})]}),e.jsxs("div",{className:"action-card secondary-action",children:[e.jsx("div",{className:"action-icon",children:"📋"}),e.jsx("h3",{children:"View History"}),e.jsx("p",{children:"Review your previous assessments and track your health journey over time."}),e.jsx("button",{className:"action-button secondary",onClick:h,children:"View Full History"})]})]}),e.jsxs("div",{className:"recent-triage-section",children:[e.jsx("h2",{children:"Recent Assessment"}),t&&e.jsxs("div",{className:"error-message",children:[e.jsx("span",{className:"error-icon",children:"⚠️"}),t]}),!t&&a?e.jsxs("div",{className:"recent-triage-card",children:[e.jsxs("div",{className:"triage-header",children:[e.jsxs("div",{className:"triage-priority",children:[e.jsx("span",{className:"priority-icon",children:p(a.priority)}),e.jsxs("span",{className:"priority-text",style:{color:g(a.priority)},children:[a.priority," Priority"]})]}),e.jsx("div",{className:"triage-date",children:u(a.createdAt)})]}),e.jsxs("div",{className:"triage-content",children:[e.jsxs("div",{className:"triage-symptoms",children:[e.jsx("h4",{children:"Symptoms Reported:"}),e.jsx("div",{className:"symptoms-list",children:(m=a.symptoms)==null?void 0:m.map((s,r)=>e.jsx("span",{className:"symptom-tag",children:s},r))})]}),e.jsxs("div",{className:"triage-recommendation",children:[e.jsx("h4",{children:"Recommendation:"}),e.jsx("p",{children:a.recommendation})]})]}),e.jsx("div",{className:"triage-actions",children:e.jsx("button",{className:"view-details-btn",onClick:h,children:"View Details"})})]}):!t&&e.jsxs("div",{className:"no-triage-card",children:[e.jsx("div",{className:"no-triage-icon",children:"🔍"}),e.jsx("h3",{children:"No Previous Assessments"}),e.jsx("p",{children:"You haven't completed any health assessments yet. Start your first emergency assessment to get personalized care recommendations."}),e.jsx("button",{className:"action-button primary",onClick:d,children:"Start Your First Assessment"})]})]}),e.jsxs("div",{className:"health-tips-section",children:[e.jsx("h2",{children:"Health Tips"}),e.jsxs("div",{className:"tips-grid",children:[e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:"💧"}),e.jsx("h4",{children:"Stay Hydrated"}),e.jsx("p",{children:"Drink at least 8 glasses of water daily to maintain optimal health."})]}),e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:"🚶"}),e.jsx("h4",{children:"Regular Exercise"}),e.jsx("p",{children:"Aim for 30 minutes of moderate exercise most days of the week."})]}),e.jsxs("div",{className:"tip-card",children:[e.jsx("div",{className:"tip-icon",children:"😴"}),e.jsx("h4",{children:"Quality Sleep"}),e.jsx("p",{children:"Get 7-9 hours of quality sleep each night for better health."})]})]})]})]})})};export{R as default};
