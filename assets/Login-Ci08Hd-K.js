import{A as b,j as e,L as N}from"./index-Ho7Cjgmc.js";import{r as l}from"./vendor-Gm9i_4Ku.js";import{u as w,L as v}from"./router-DR174eU1.js";import"./ui-F4NiDqF7.js";const k=()=>{const[o,u]=l.useState({email:"",password:""}),[s,m]=l.useState({}),[n,p]=l.useState(!1),[c,t]=l.useState(""),{login:h}=l.useContext(b),x=w(),g=a=>{const{name:i,value:d}=a.target;u(r=>({...r,[i]:d})),s[i]&&m(r=>({...r,[i]:""})),c&&t("")},j=()=>{const a={};return o.email?/\S+@\S+\.\S+/.test(o.email)||(a.email="Please enter a valid email address"):a.email="Email is required",o.password?o.password.length<6&&(a.password="Password must be at least 6 characters long"):a.password="Password is required",m(a),Object.keys(a).length===0},f=async a=>{var i,d;if(a.preventDefault(),console.log("Login form submitted:",o),t(""),!!j()){p(!0);try{const r=await h(o);r.success?x("/dashboard"):t(r.message||"Login failed. Please try again.")}catch(r){console.error("Login error:",r),t(((d=(i=r.response)==null?void 0:i.data)==null?void 0:d.message)||r.message||"Network error. Please check your connection and try again.")}finally{p(!1)}}};return e.jsx("div",{className:"login-page",children:e.jsx("div",{className:"login-container",children:e.jsxs("div",{className:"login-card",children:[e.jsxs("div",{className:"login-header",children:[e.jsxs("div",{className:"login-logo",children:[e.jsx("div",{className:"logo-icon",children:e.jsx("span",{className:"medical-cross",children:"⚕"})}),e.jsx("h1",{className:"login-title",children:"EmergenX"})]}),e.jsx("p",{className:"login-subtitle",children:"Welcome back to your healthcare dashboard"})]}),e.jsxs("form",{onSubmit:f,className:"login-form",role:"form",noValidate:!0,children:[e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"email",className:"form-label",children:"Email Address"}),e.jsx("input",{type:"email",id:"email",name:"email",value:o.email,onChange:g,className:`form-input ${s.email?"form-input-error":""}`,placeholder:"Enter your email","aria-describedby":s.email?"email-error":void 0,"aria-invalid":!!s.email,autoComplete:"email",disabled:n}),s.email&&e.jsx("span",{id:"email-error",className:"error-message",role:"alert",children:s.email})]}),e.jsxs("div",{className:"form-group",children:[e.jsx("label",{htmlFor:"password",className:"form-label",children:"Password"}),e.jsx("input",{type:"password",id:"password",name:"password",value:o.password,onChange:g,className:`form-input ${s.password?"form-input-error":""}`,placeholder:"Enter your password","aria-describedby":s.password?"password-error":void 0,"aria-invalid":!!s.password,autoComplete:"current-password",disabled:n}),s.password&&e.jsx("span",{id:"password-error",className:"error-message",role:"alert",children:s.password})]}),c&&e.jsxs("div",{className:"login-error",role:"alert",children:[e.jsx("span",{className:"error-icon",children:"⚠"}),c]}),e.jsx("button",{type:"submit",className:"login-button",disabled:n,"aria-describedby":"login-button-status",children:n?e.jsxs(e.Fragment,{children:[e.jsx(N,{}),e.jsx("span",{children:"Signing in..."})]}):e.jsxs(e.Fragment,{children:[e.jsx("span",{children:"Login"}),e.jsx("span",{className:"button-arrow",children:"→"})]})}),e.jsx("div",{className:"login-footer",children:e.jsxs("p",{className:"register-link",children:["Don't have an account?"," ",e.jsx(v,{to:"/register",className:"register-link-text",children:"Register here"})]})})]})]})})})};export{k as default};
