import{c as v,u as y,d as b,j as s,N as g,r as i}from"./index-xrWeT0Kj.js";import{a as f}from"./triageService-pzd6z597.js";const S=()=>{var j,N;const n=v(),m=y(),{id:r}=b();if(!r)return s.jsx(g,{to:"/dashboard",replace:!0});const[e,u]=i.useState(null),[p,l]=i.useState(!0),[h,x]=i.useState(null);i.useEffect(()=>{var a;r?(async()=>{try{l(!0),x(null);const t=await f(r);if(console.log("Triage result:",t),t)u(t);else throw new Error("No result data received")}catch(t){console.error("Error fetching result:",t),x(t.message||"Failed to load triage result")}finally{l(!1)}})():(a=n.state)!=null&&a.result&&(u(n.state.result),l(!1))},[r,n.state]);const c=()=>{m("/triage")},o=()=>{m("/history")};return p?s.jsx("div",{className:"results-wrapper",children:s.jsx("div",{className:"results-container",children:s.jsxs("div",{className:"results-loader",children:[s.jsx("div",{className:"loader-spinner"}),s.jsx("p",{children:"Loading your assessment results..."})]})})}):h?s.jsx("div",{className:"results-wrapper",children:s.jsx("div",{className:"results-container",children:s.jsx("div",{className:"results-card",children:s.jsxs("div",{className:"error-section",role:"alert",children:[s.jsx("h2",{children:"Error Loading Results"}),s.jsx("p",{children:h}),s.jsxs("div",{className:"results-actions",children:[s.jsx("button",{onClick:c,className:"action-button primary-button",children:"Start New Assessment"}),s.jsx("button",{onClick:o,className:"action-button secondary-button",children:"View History"})]})]})})})}):e?s.jsx("div",{className:"results-wrapper",children:s.jsx("div",{className:"results-container",children:s.jsxs("div",{className:"results-card",children:[s.jsxs("header",{className:"results-header",children:[s.jsx("h1",{className:"results-title",children:"Assessment Results"}),s.jsx("p",{className:"results-subtitle",children:"Here are your personalized health recommendations based on your symptoms"})]}),s.jsxs("section",{className:"priority-section",children:[s.jsx("div",{className:"priority-label",children:"Priority Level"}),s.jsx("div",{className:"priority-value",children:e.priority})]}),s.jsxs("section",{className:"symptoms-summary",children:[s.jsx("h2",{className:"summary-title",children:"Symptoms Reported"}),s.jsx("div",{className:"symptoms-list",children:(j=e.symptoms)==null?void 0:j.map((d,a)=>s.jsx("div",{className:"symptom-tag",children:d.name||d},a))})]}),s.jsxs("section",{className:"recommendation-section",children:[s.jsxs("h2",{className:"recommendation-title",children:[s.jsx("span",{className:"recommendation-icon",children:"ðŸ’¡"}),"Recommendation"]}),s.jsx("div",{className:"recommendation-content",children:((N=e.recommendation)==null?void 0:N.message)||e.recommendation})]}),s.jsxs("section",{className:"assessment-details",children:[s.jsxs("div",{className:"detail-item",children:[s.jsx("strong",{children:"Assessment ID:"})," ",e._id||e.triageId]}),s.jsxs("div",{className:"detail-item",children:[s.jsx("strong",{children:"Date:"})," ",new Date(e.createdAt).toLocaleString()]})]}),s.jsxs("div",{className:"results-actions",children:[s.jsx("button",{onClick:c,className:"action-button primary-button",children:"Start New Assessment"}),s.jsx("button",{onClick:o,className:"action-button secondary-button",children:"View History"})]})]})})}):s.jsx("div",{className:"results-wrapper",children:s.jsx("div",{className:"results-container",children:s.jsx("div",{className:"results-card",children:s.jsxs("div",{className:"error-section",children:[s.jsx("h2",{children:"No Results Found"}),s.jsx("p",{children:"We couldn't find your assessment results. Please try again."}),s.jsxs("div",{className:"results-actions",children:[s.jsx("button",{onClick:c,className:"action-button primary-button",children:"Start New Assessment"}),s.jsx("button",{onClick:o,className:"action-button secondary-button",children:"View History"})]})]})})})})};export{S as default};
